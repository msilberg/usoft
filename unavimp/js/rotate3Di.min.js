(function(a){var b={direction:function(a){return a<0?-1:1},degrees:function(a){return Math.floor(Math.abs(a))%360},scale:function(a){return(1-a%180/90)*(a>=180?-1:1)}};a.fx.step.rotate3Di=function(c){direction=b.direction(c.now);degrees=b.degrees(c.now);scale=b.scale(degrees);if(c.options&&typeof c.options["sideChange"]!="undefined"){if(c.options["sideChange"]){var d=a(c.elem).data("rotate3Di.prevScale");if(scale*d<=0){c.options["sideChange"].call(c.elem,scale>0||d<0);a(c.elem).data("rotate3Di.prevScale",a(c.elem).data("rotate3Di.prevScale")*-1)}}scale=Math.abs(scale)}a(c.elem).data("rotate3Di.degrees",direction*degrees);a(c.elem).css("transform","skewY("+direction*degrees+"deg)"+" scale("+scale+", 1)")};var c=a.fx.prototype.cur;a.fx.prototype.cur=function(){if(this.prop=="rotate3Di"){return a(this.elem).data("rotate3Di.degrees")||0}return c.apply(this,arguments)};a.fn.rotate3Di=function(c,d,e){if(typeof d=="undefined"){d=0}if(typeof e=="object"){a.extend(e,{duration:d})}else{e={duration:d}}if(c=="toggle"){if(a(this).data("rotate3Di.flipped")){c="unflip"}else{c="flip"}}if(c=="flip"){a(this).data("rotate3Di.flipped",true);var f=-1;if(typeof e=="object"&&e["direction"]&&e["direction"]=="clockwise"){f=1}c=f*180}else if(c=="unflip"){a(this).data("rotate3Di.flipped",false);c=0}var g=a(this).data("rotate3Di.degrees")||0;a(this).data("rotate3Di.prevScale",b.scale(b.degrees(g)));a(this).animate({rotate3Di:c},e)}})(jQuery)