function strReplace(a,b,c){if(!(b instanceof Array)){b=new Array(b);if(a instanceof Array){while(a.length>b.length){b[b.length]=b[0]}}}if(!(a instanceof Array))a=new Array(a);while(a.length>b.length){b[b.length]=""}if(c instanceof Array){for(d in c){c[d]=str_replace(a,b,c[d])}return c}for(var d=0;d<a.length;d++){var e=c.indexOf(a[d]);while(e>-1){c=c.replace(a[d],b[d]);e=c.indexOf(a[d],e)}}return c}function clearAll(){$(".adf").val("");$("div.sch-list").hide();$("div.add-client").hide()}function markAll(){if(chAll){$("input.st-ch").prop("checked",false);chAll=false}else{$("input.st-ch").prop("checked",true);chAll=true}}function getSelected(){var a=null;var b=[];var c="";var d=$("input.sname").val();var e=$("input.fname").val();var f=$("input.mname").val();for(var g=0;g<$("input.st-ch").length;g++){if($("input.st-ch").eq(g).is(":checked")){b.push($("input.st-ch").eq(g).val())}}$.each(b,function(a,d){c+=d;if(a+1<b.length){c+=","}});if(d.length==0||e.length==0||f.length==0){alert("необходимо заполнить все поля");return false}else if(b.length==0){alert("необходимо выбрать магазины для добавления");return false}a="sn="+d+"&fn="+e+"&mn="+f+"&stores="+c;$.get(urlAdd+a);clearAll()}function findStores(){if($("textarea#stores").val().length==0){alert("для поиска необходимо заполнить поле имен магазинов");return false}$("div.sch-list").show();$("div.add-client").show();$("div.sch-list-cont").load(urlOtp+strReplace(" ","",$("textarea#stores").val()))}var bUrl="http://uadmin.no-ip.biz/tools/addclient/";var urlAdd=bUrl+"add.php?";var urlOtp=bUrl+"otp.php?stores=";var chAll=false;$(document).ready(function(){$("div.add-client").on("click",getSelected);$("div.find-stores").on("click",findStores);$("div.reset").on("click",clearAll);$("div.mark-all").live("click",markAll)})