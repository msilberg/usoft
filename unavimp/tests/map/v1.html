<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/raphael.min.js"></script>
<script type="text/javascript" language="JavaScript">
	$(document).ready(function(){
		var paper = Raphael(0,0,1360,525);
		
		var objArr = new Array(
			paper.path("m 30.38587,15.905193 65.03518,0 0,65.453657 -65.03518,0 z"),
			paper.path("m 95.38948,15.872726 65.03519,0 0,65.453664 -65.03519,0 z"),
			paper.path("m 160.41472,15.872726 65.03519,0 0,65.453664 -65.03519,0 z"),
			paper.path("m 30.37506,81.35612 65.03518,0 0,65.45366 -65.03518,0 z"),
			paper.path("m 95.37868,81.32365 65.03519,0 0,65.45366 -65.03519,0 z"),
			paper.path("m 160.40392,81.32365 65.03519,0 0,65.45366 -65.03519,0 z"),
			paper.path("m 30.50131,146.76018 65.03518,0 0,65.45366 -65.03518,0 z"),
			paper.path("m 95.50495,146.72771 65.03518,0 0,65.45366 -65.03518,0 z"),
			paper.path("m 160.53017,146.72771 65.03519,0 0,65.45366 -65.03519,0 z")
		);
		var textArr = new Array(
			paper.text(62,49,"1"),
			paper.text(128,49,"2"),
			paper.text(193,49,"3"),
			paper.text(62,114,"4"),
			paper.text(128,114,"5"),
			paper.text(193,114,"6"),
			paper.text(62,181,"7"),
			paper.text(128,181,"8"),
			paper.text(193,181,"9")
		);
		
		/*var dobj = paper.path("m 30.38587,15.905193 65.03518,0 0,65.453657 -65.03518,0 z");
		dobj.attr({"fill":"add8e6","stroke":"0086b2"});*/
		
		var step = 0.2;
		var vscale = 1;
		var fstep = 5;
		var fsize = 36;
		var ts = -15; // translate scale
		var xb = 0;
		var yb = 0;
		var x0, y0, x1, y1, dx, dy;
		
		var start = function(){
			// storing original coordinates
			x0 = 0; //this.getBBox().x;
			y0 = 0; //this.getBBox().y;
		},
		move = function(x1,y1){
			// move will be called with dx and dy
			if (x1 == 0){
				$("div.otp").css("background-color","red");
				xb = x0;
			}else{
				$("div.otp").css("background-color","a1cedd");
			}
			if (y1 == 0){
				$("div.otp").css("background-color","red");
				yb = y0;
			}else{
				$("div.otp").css("background-color","a1cedd");
			}
			dx = x1 + xb - x0;
			dy = y1 + yb - y0;
			$("div.otp").text(x1+" "+y1+" | "+x0+" "+y0);
			for (var i = 0; i < objArr.length; i++){
				objArr[i].translate(dx, dy);
				textArr[i].translate(dx, dy);
			}
			x0 = x1;
			y0 = y1;
		},
		up = function () {
			// restoring state
		};
		
		//dobj.drag(move, start, up);
		
		for (var i = 0; i < objArr.length; i++) {
			objArr[i].attr({"fill":"add8e6","stroke":"0086b2"});
			textArr[i].attr("font-size",fsize);
			objArr[i].drag(move, start, up);
			textArr[i].drag(move, start, up);
		}
		
		// ---=== The Scale ===---
		$("div.plus").click(function(){
			vscale += step;
			fsize += fstep;
			//dobj.scale(vscale,vscale,vscale,vscale);
			for (var i = 0; i < objArr.length; i++){
				objArr[i].scale(vscale,vscale,vscale,vscale);
				textArr[i].scale(vscale,vscale,vscale,vscale);
				textArr[i].attr("font-size",fsize);
				/*objArr[i].translate(ts,ts);
				textArr[i].translate(ts,ts);*/
			}
		});
		$("div.minus").click(function(){
			vscale -= step;
			fsize -= fstep;
			//dobj.scale(vscale,vscale,vscale,vscale);
			for (var i = 0; i < objArr.length; i++) {
				objArr[i].scale(vscale,vscale,vscale,vscale);
				textArr[i].scale(vscale,vscale,vscale,vscale);
				textArr[i].attr("font-size",fsize);
				/*objArr[i].translate(ts*(-1),ts*(-1));
				textArr[i].translate(ts*(-1),ts*(-1));*/
			}
		});
	});
</script>
<style>
	.btn{
		display: block; 
		width: 150px;
		height: 70px;
		border: 1px solid #002b3a;
		background-color: #a1cedd;
		color: #002b3a;
		text-align: center;
	}
	.minus, .plus{
		font-size: 36pt;
	}
	table{
		position: relative; top: 520px; left: 0px;
	}
</style>
</head>
	<body>
		<table cellpadding="5" cellspacing="5">
			<tr>
				<td><div class="plus btn">+</div></td>
				<td><div class="minus btn">-</div></td>
				<td><div class="btn otp"></div></td>
			</tr>
		</table>
	</body>
</html>
